/*! For license information please see shortcode.1iVFEDRd8.js.LICENSE.txt */
!function(){const t=PRHelper.getType(),e=PRHelper.getHTML(),r=PRHelper.getHook();window.PRShortcodeManager={activeNode:null,activeModal:null,setActiveNode(t,o){this.activeNode=t,this.activeModal=o,e.setElementActivity(e.getElement(".pr-tabs",o),!1),r.addAction(`form_generator_${e.getAttribute(o,"id")}_before_close`,(()=>{this.clearActiveNode()}),10);const n=e.getElement("button#insert-shortcode",o),s=e.getData(n,"update-text");s&&e.setText(n,s)},getActiveNode(){return this.activeNode},getActiveModal(){return this.activeModal},clearActiveNode(){o.reset(),e.setElementActivity(e.getElement(".pr-tabs",this.activeModal),!0),this.activeNode=null,this.activeModal=null;const t=e.getElement("button#insert-shortcode",this.activeModal),r=e.getData(t,"insert-text");r&&e.setText(t,r)}};const o={getString:(t,r)=>{const n=o.getAttributes(r),s=e.getData(t,"slug");return o.getConstruct(`${s}_${r}`,n)},getPlaceholder:(t,e)=>`<span class="pr-shortcode-tag" data-shortcode="${t}">${e}</span>`,getCurrentName:()=>{const t=e.getElement(".pr-segment-nav-item.pr-tab-link.is-active");return!!e.isElement(t)&&e.getData(t,"name")},getConstruct:(e,n)=>{let s=`[${e}`;return t.each(n,((n,c)=>{t.isEmpty(n)||("Object"===(n=r.applyFilters(e+"_before_construct_"+c+"_value",n)).constructor.name?s+=" "+c+"="+o.getConstructOfObject(n):s+=" "+c+'="'+n+'"')})),s=s.trim(),s+="]",r.applyFilters("",s,e)},getConstructOfObject:(e,r=1)=>{let n="";return 1===r&&(n+='"'),t.each(e,((t,e)=>{"Object"===t.constructor.name?n+="("+o.getConstructOfObject(t,r+1)+"),":n+=(t=e+"='"+t+"'").replace(/,/g,"|")+","})),n=n.replace(/,\s*$/,""),n=n.trim(),1===r&&(n+='"'),n},insert:(t,n)=>{window.wpActiveEditor="content";const s=window.PRShortcodeManager.getActiveNode(),c=o.getString(n,t);s?(s.innerText=c,window.PRShortcodeManager.clearActiveNode()):window.send_to_editor(o.getPlaceholder(t,c));const i=e.getParent(n,".pr-modal-frame");if(e.isElement(i)){const t=e.getElement(".pr-modal-close-button",i);r.simulateClick(t)}},reset:(e="")=>{t.isEmpty(e)&&(e=o.getCurrentName());const r=o.getInputs(e);t.isEmpty(r)||t.each(r,(t=>{PRBackendHelper.getForm().clearField(t)}))},getInputs:t=>e.getElements("input:not([type=button]), select, textarea",`#pr-segment-${t}`),getAttributes:n=>{const s={},c=o.getInputs(n);return t.each(c,(t=>{const r=e.getAttribute(t,"id");if(r){const o=e.getParent(t,".pr-field");let n=PRHelper.getForm().getFieldValue(o);"string"==typeof n&&(n=encodeURIComponent(n)),s[r]=n}})),r.applyFilters("shortcode_attributes",s)}};r.on("click",((e,n)=>{e.preventDefault();const s=o.getCurrentName();if(s){r.doAction("before_insert_shortcode",s);const e=tinyMCE.activeEditor;t.isEmpty(e)||e.fire("before_insert_shortcode",{shortcode:s}),o.insert(s,n),o.reset(s),t.isEmpty(e)||e.fire("after_insert_shortcode",{shortcode:s}),r.doAction("after_insert_shortcode",s)}}),"button#insert-shortcode")}();