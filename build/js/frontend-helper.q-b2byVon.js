(()=>{"use strict";const e=class{};const t=class extends e{alert(e,t={}){"string"==typeof t&&(t={content:t}),t=PRHelper.getFormat().parseArgs(t,{type:"warning",content:"",replace:!0});const s=PRHelper.getHTML();if(PRHelper.getType().isEmpty(t.content))!0===t.replace&&s.empty(e);else{let n=s.createElement(`<div class="alert alert-${t.type}" role="alert">${t.content}</div>`);s.fadeIn(n,{start:()=>{t.replace?s.replace(n,e):s.append(n,e)}})}}};const s=class extends e{onSubmit(e={}){e=PRHelper.getFormat().parseArgs(e,{form:"",error:null,success:null,action:"",messageWrapper:"",removeForm:!1,clear:!0});let t=this,s=e.error,n=e.success,r=e.messageWrapper,l=PRHelper.getHTML();PRHelper.getHook().on("submit",(function(a,o){if(a.preventDefault(),t.removeErrors(o,r),!l.hasClass(o,"active")){"function"!=typeof n&&(n=t=>{if(e.removeForm)l.fadeOut(o,(()=>{o.remove()}),"fast");else if(e.clear){let e=l.getElements("input, textarea, select",o);PRHelper.getType().each(e,(e=>{l.setValue(e,"")}))}l.fadeIn(r,{start:()=>{l.replace(t,r)}})}),"function"!=typeof s&&(s=e=>{t.showErrors(o,e,r)});let a=l.getElement("[type=submit]",o);l.addClass(o,"active"),l.setElementActivity(a,!1),PRHelper.getRequest().ajax(e.action).onSuccess(n).onError(s).onFinally((()=>{l.removeClass(o,"active"),l.setElementActivity(a,!0)})).addNonce().send(l.serializeForm(o))}}),e.form)}loadForm(e,t,s){const n=PRHelper.getHTML();(e=n.getElements(e)).forEach((e=>{PRHelper.getRequest().ajax(n.getData(e,"action")).addNonce().onSuccess((s=>{"string"==typeof s&&n.fadeIn(e,{start:()=>{n.replace(s,e),"function"==typeof t&&t(n.getElement("form",e))}})})).onError((t=>{n.fadeIn(e,{start:()=>{n.replace(t,e)}}),"function"==typeof s&&s()})).send()}))}removeErrors(e,t=null){const s=PRHelper.getHTML();let n=s.getElement(".is-invalid",e);s.removeClass(n,"is-invalid"),(t=s.getElement(t))&&s.setText(t,"")}showErrors(e,t,s=null){const n=PRHelper.getHTML(),r=PRHelper.getType();if(!r.isEmpty(t)){let l,a,o,c,i,p=[];if("object"==typeof t)for(c in t)a=t[c],i=n.getElement(`[name=${c}]`,e),n.isElement(i)?(l=i.closest(".pr-field"),n.isElement(l)?(o=n.getElement(".invalid-feedback",l),o&&n.isElement(o)?n.replace(a,o):(o=n.createElement(`<div class="invalid-feedback">${t[c]}</div>`),n.append(o,l)),n.fadeIn(o),n.addClass(i,"is-invalid")):p.push(a)):p.push(a);else p=t;s=n.getElement(s),n.isElement(s)&&!r.isEmpty(p)&&n.fadeIn(s,{start:()=>{n.append(t,s)}})}}};const n=class{instances={};getHelperInstance(e){let t=null;return t=e in this.instances?this.instances[t]:new e,t}};const r=new class extends n{getForm(){return this.getHelperInstance(s)}getHTML(){return this.getHelperInstance(t)}};window.PRFrontendHelper=r})();